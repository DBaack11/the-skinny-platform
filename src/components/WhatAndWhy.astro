---
import { Image } from "astro:assets";
import { Mic, Megaphone, MessagesSquare } from "lucide-astro";
import CTAButton from "./CTAButton.astro";
import NoisyHeadMockup from "../assets/noisy-head-mockup.png";
---

<div class="pb-[25%] flex flex-col items-center border">
  <div
    class="relative h-[60px] sm:h-[75px] md:h-[100px] lg:h-[125px] -translate-y-1/2 w-[90%] md:w-[80%] bg-skinny-tan rounded-xl md:rounded-2xl flex p-2 md:p-4 shadow-xl overflow-hidden"
  >
    <div
      id="slider"
      class="absolute inset-0 w-[calc(50%-8px)] md:w-[calc(50%-16px)] m-2 md:m-4 border-[1.5px] border-skinny-orange/30 bg-skinny-orange/5 rounded-lg md:rounded-xl transition-transform duration-300 z-0"
    >
    </div>
    <button data-tab="what" class="tab-button relative z-10 flex-1 text-sm min-[500px]:text-base md:text-2xl lg:text-4xl text-center text-black drop-shadow-md"
      >What is the Skinny™?</button
    >
    <button data-tab="why" class="tab-button relative z-10 flex-1 text-sm min-[500px]:text-base md:text-2xl lg:text-4xl text-center text-black drop-shadow-md"
      >Why the Skinny™?</button
    >
  </div>

  <div id="what" class="mx-4 md:mx-12 mt-6 flex flex-col items-center justify-center text-center">
    <h1 class="text-2xl md:text-4xl xl:text-5xl font-medium text-black drop-shadow-md">This is the business book, reinvented.</h1>
    <p class="text-base md:text-xl xl:text-2xl font-light italic text-black drop-shadow-md mt-3">Maximum value in minimum time.</p>

    <div class="flex flex-col-reverse lg:flex-row items-center justify-evenly my-12">
      <div class="max-w-[80%] lg:max-w-[40%] text-base md:text-xl xl:text-2xl font-light text-center text-black drop-shadow-md">
        <p class="my-12">We've all had a love-hate relationship with the standard business book - too much filler, not enough value.</p>
        <p>
          The Skinny™ is our reinvention of this established format, stripping away everything that doesn't add genuine impact. Skinny™ books are written to be read in under 60
          minutes, empowering you to read in one sitting without having to put the book down.
        </p>
      </div>

      <Image src={NoisyHeadMockup} class="max-w-[60%] lg:max-w-[40%]" alt="Noisy Head Mockup" />
    </div>
    <CTAButton label="Learn About Our Process" action="learn-more" class="mb-24" />
  </div>

  <div id="why" class="flex flex-col items-center justify-center hidden">
    <div class="flex flex-col items-center gap-8 max-w-[80%] mb-24">
      <div class="rounded-lg p-6 flex flex-col items-center justify-center border-2 border-black/30 relative mt-8">
        <div class="absolute -top-5 md:-top-6 left-1/2 -translate-x-1/2 p-1 bg-skinny-tan">
          <MessagesSquare class="w-8 h-8 md:w-10 md:h-10 text-black drop-shadow-lg" />
        </div>
        <p class="text-base sm:text-lg md:text-xl xl:text-2xl font-light text-black drop-shadow-md text-center">
          Writing isn't every entrepreneur's strength. Our approach transforms your <span class="font-semibold underline">ideas into a book through engaging conversations. </span>
        </p>
      </div>

      <div class="rounded-lg p-6 flex flex-col items-center justify-center border-2 border-black/30 relative mt-8">
        <div class="absolute -top-5 md:-top-6 left-1/2 -translate-x-1/2 p-1 bg-skinny-tan">
          <Mic class="w-8 h-8 md:w-10 md:h-10 text-black drop-shadow-lg" />
        </div>
        <p class="text-base sm:text-lg md:text-xl xl:text-2xl font-light text-black drop-shadow-md text-center">
          <span class="font-semibold underline">Preserve your voice and ideas.</span> No ghostwriter revisions, no diluted messaging - just the entrepreneur's firsthand expertise, shared
          as intended to be consumed.
        </p>
      </div>

      <div class="rounded-lg p-6 flex flex-col items-center justify-center border-2 border-black/30 relative mt-8">
        <div class="absolute -top-5 md:-top-6 left-1/2 -translate-x-1/2 p-1 bg-skinny-tan">
          <Megaphone class="w-8 h-8 md:w-10 md:h-10 text-black drop-shadow-lg" />
        </div>
        <p class="text-base sm:text-lg md:text-xl xl:text-2xl font-light text-black drop-shadow-md text-center">
          In a crowded content landscape, standing out is tough. <span class="font-semibold underline">Amplify your voice and be heard</span> with our Skinny™ format, promotion, and
          strategy.
        </p>
      </div>
    </div>
    <CTAButton label="Learn About Our Process" action="learn-more" class="mb-24" />
  </div>
</div>

<style>
  .tab-button {
    background: transparent !important;
  }
</style>

<script>
  function initializeTabs() {
    const tabs = document.querySelectorAll("[data-tab]");
    const slider = document.getElementById("slider");

    tabs.forEach((tab) => {
      tab.addEventListener("click", () => {
        // Slide the background
        if (slider) {
          slider.style.transform = tab.getAttribute("data-tab") === "why" ? "translateX(100%)" : "translateX(0)";
        }

        // Show/hide content
        const targetId = tab.getAttribute("data-tab");
        document.querySelectorAll("#what, #why").forEach((content) => {
          content.classList.toggle("hidden", content.id !== targetId);
        });
      });
    });
  }

  // document.addEventListener('astro:page-load', () => {
  initializeTabs();
  // });
</script>
